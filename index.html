<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã€æ—¥æ›¿ã‚ã‚Šã€‘åè¨€ãƒ»æ ¼è¨€é›†ï½œäººç”Ÿãƒ»æˆåŠŸã®æ•™è¨“ã¨æ·±æ˜ã‚Šè§£èª¬</title>
    
    <!-- ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã®è¿½åŠ  -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ’¡</text></svg>">
    
    <!-- ãƒ¡ã‚¿ã‚¿ã‚°ï¼ˆDescription, Keywordsï¼‰ã®è¿½åŠ  -->
    <meta name="description" content="å³é¸ã•ã‚ŒãŸæ­´å²ä¸Šã®åè¨€ã¨ã€ãã®èƒŒæ™¯ãƒ»æ„å‘³ã‚’æ·±ãè§£èª¬ã€‚æ¯æ—¥ã‚’è±Šã‹ã«ã™ã‚‹æ•™è¨“ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚">
    <meta name="keywords" content="åè¨€,æ ¼è¨€,è‡ªå·±å•“ç™º,äººç”Ÿ,æˆåŠŸ,ä»•äº‹è¡“,ç¿’æ…£åŒ–,ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³,ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—,æ·±æ˜ã‚Šè§£èª¬,æ—¥ã‚ãã‚Š,ã‚¿ã‚°æ¤œç´¢">

    <!-- OGPã‚¿ã‚°ï¼ˆSNSã‚·ã‚§ã‚¢æœ€é©åŒ–ï¼‰ã®è¿½åŠ  -->
    <meta property="og:title" content="ã€ä»Šæ—¥ã®æ•™è¨“ã€‘æ—¥æ›¿ã‚ã‚Šåè¨€ãƒ»æ ¼è¨€é›†ã¨å¾¹åº•è§£èª¬">
    <meta property="og:description" content="å³é¸åè¨€ã‚’æ·±æ˜ã‚Šè§£èª¬ã€‚ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³å‘ä¸Šã€è‡ªå·±å•“ç™ºã«ã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://[ã‚ãªãŸã®ã‚µã‚¤ãƒˆURL]/index.html"> 
    <meta property="og:image" content="https://placehold.co/1200x630/4f46e5/ffffff?text=MEIGEN">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@meigen_bot"> 
    
    <!-- Tailwind CSS CDNã‚’ãƒ­ãƒ¼ãƒ‰ -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts (UIç”¨ã®Inter, åè¨€ç”¨ã®Noto Serif JP) -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Serif+JP:wght@400;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* Slate 100 */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .main-container {
            max-width: 48rem; /* å¹…ã‚’åºƒã’ã€ã‚ˆã‚Šå¤šãã®æƒ…å ±ã‚’è¡¨ç¤º */
            width: 100%;
        }

        /* åè¨€ç”¨ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ */
        #quote-text {
            font-family: 'Noto Serif JP', serif;
            font-size: 1.5rem; /* 24px */
            line-height: 2.25rem; /* 36px */
            font-weight: 400;
            min-height: 100px; 
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 120px; /* CLSå¯¾ç­– */
        }
        
        /* è‘—è€…ç”¨ã®ãƒ•ã‚©ãƒ³ãƒˆ */
        #quote-author {
            font-family: 'Inter', sans-serif;
            font-size: 1rem; /* 16px */
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ã‚’ä¸‹ã«å›ºå®š */
        footer {
            margin-top: auto;
            width: 100%;
            max-width: 48rem;
            padding-top: 20px;
            text-align: center;
        }

        /* ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ */
        .fade-in {
            transition: opacity 0.3s ease-in-out;
        }

        /* é€šçŸ¥ãƒœãƒƒã‚¯ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #notification-box {
            transition: opacity 0.3s ease-in-out;
        }
        
        /* CLSå¯¾ç­–: è§£èª¬ã‚¨ãƒªã‚¢ã®æœ€ä½é«˜ã•ã‚’ç¢ºä¿ */
        #explanation-area {
            min-height: 150px; 
        }

        /* åºƒå‘Šã‚³ãƒ³ãƒ†ãƒŠã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼šãƒãƒªã‚·ãƒ¼é•åã«ãªã‚‰ãªã„ã‚ˆã†ã€ç›®ç«‹ã¡ã™ããªã„ã‚ˆã†ã«ã—ã¤ã¤ã€è¦–èªæ€§ã‚’ç¢ºä¿ */
        .ad-unit-container {
            margin-top: 24px; 
            margin-bottom: 24px;
            padding: 12px 0; /* ä¸Šä¸‹ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’ç¢ºä¿ */
            text-align: center;
            border-top: 1px dashed #e5e7eb; 
            border-bottom: 1px dashed #e5e7eb;
        }
        
        /* åºƒå‘Šã¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¦ç´ ã®è·é›¢ã‚’ç¢ºä¿ï¼ˆæœ€ä½30pxï¼‰ */
        #generate-btn {
            margin-top: 32px; 
        }

        /* é™çš„ãƒªã‚¹ãƒˆç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .static-quote-card {
            border: 1px solid #e5e7eb; /* Gray 200 */
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1rem;
            margin-bottom: 1.5rem;
            background-color: #f9fafb; /* Gray 50 */
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
        }
        .static-quote-text {
            font-family: 'Noto Serif JP', serif;
            font-size: 1.125rem; /* text-lg */
            font-weight: 700; /* font-bold */
            color: #1f2937; /* Gray 800 */
            margin-bottom: 0.5rem;
        }
        .static-author-text {
            font-size: 0.875rem; /* text-sm */
            color: #4b5563; /* Gray 600 */
            text-align: right;
            margin-bottom: 0.75rem;
        }
        .static-explanation-text {
            font-size: 0.875rem; /* text-sm */
            color: #374151; /* Gray 700 */
            line-height: 1.6;
        }

    </style>
    
    <!-- Google AdSenseèªè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (HEADå†…) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6721819057047925"
     crossorigin="anonymous"></script>
     
    <!-- Google CMP åŒæ„ç®¡ç†ã‚³ãƒ¼ãƒ‰ -->
    <script async src="https://fundingchoicesmessages.google.com/i/pub-6721819057047925?cmp_v=2" nonce=""></script>
    <script>
        (function() {
            function handleGmpu() {
                if (!window.frames['__gmpuframe']) {
                    var iframe = document.createElement('iframe');
                    iframe.style.display = 'none';
                    iframe.name = '__gmpuframe';
                    document.body.appendChild(iframe);
                }
            }
            handleGmpu();
        })();
    </script>
    
    <!-- JSON-LD æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ  -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "ã€æ—¥æ›¿ã‚ã‚Šã€‘åè¨€ãƒ»æ ¼è¨€é›†ï½œäººç”Ÿãƒ»æˆåŠŸã®æ•™è¨“ã¨æ·±æ˜ã‚Šè§£èª¬",
      "description": "å³é¸ã•ã‚ŒãŸåè¨€ã¨ã€ãã®èƒŒæ™¯ãƒ»æ„å‘³ã‚’æ·±ãè§£èª¬ã€‚æ¯æ—¥ã‚’è±Šã‹ã«ã™ã‚‹æ•™è¨“ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚",
      "url": "https://[ã‚ãªãŸã®ã‚µã‚¤ãƒˆURL]/index.html", 
      "inLanguage": "ja",
      "mainContentOfPage": {
        "@type": "Article",
        "headline": "åè¨€ãƒ»æ ¼è¨€é›†",
        "datePublished": "2024-01-01", 
        "author": {
          "@type": "Organization",
          "name": "æ ¼è¨€ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼"
        }
      }
    }
    </script>

</head>
<body>

<div class="main-container bg-white p-8 sm:p-12 rounded-2xl shadow-xl mb-4">
    
    <!-- H1ã‚¿ã‚° -->
    <h1 class="text-3xl font-bold text-center mb-4 text-indigo-600">
        æ—¥æ›¿ã‚ã‚Š åè¨€ãƒ»æ ¼è¨€é›†
    </h1>

    <!-- åºƒå‘Šã‚³ãƒ¼ãƒ‰ã®æŒ¿å…¥å ´æ‰€ 2: ãƒˆãƒƒãƒ—ãƒãƒŠãƒ¼åºƒå‘Š (ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼å†…) -->
    <div id="ad-container-top" class="ad-unit-container">
        <p class="text-xs font-bold text-gray-400 mb-2">ã€ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒªãƒ³ã‚¯ã€‘</p>
        <!-- AdSenseåºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆã‚³ãƒ¼ãƒ‰: åè¨€é›†_ãƒˆãƒƒãƒ—ãƒãƒŠãƒ¼ (æ­£å¼ãªID: 2834631640) -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-6721819057047925"
             data-ad-slot="2834631640" 
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    
    <!-- ç¾åœ¨ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çŠ¶æ…‹ã‚’è¡¨ç¤ºã™ã‚‹ã‚¨ãƒªã‚¢ -->
    <div id="filter-status" class="text-center mb-6 min-h-[30px]">
        <span id="current-filter-tag" class="text-sm font-medium text-gray-500">
            ã™ã¹ã¦ã®æ•™è¨“ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«è¡¨ç¤ºä¸­ <span class="text-xs text-gray-400">(ã‚¿ã‚°ã‚’ã‚¯ãƒªãƒƒã‚¯ã§çµã‚Šè¾¼ã¿)</span>
        </span>
    </div>
    
    <!-- åè¨€è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div class="mb-8 min-h-[150px]">
        <blockquote class="relative">
            <!-- å¼•ç”¨ç¬¦ï¼ˆå·¦ï¼‰ -->
            <span class="absolute -left-4 -top-6 text-8xl text-gray-200 opacity-50 select-none">â€œ</span>
            
            <!-- åè¨€ãƒ†ã‚­ã‚¹ãƒˆ -->
            <p id="quote-text" class="mb-4 text-gray-800 font-normal fade-in">
                ã€Œä»Šæ—¥ã®æ•™è¨“ã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã€æ–°ã—ã„åè¨€ã‚’è¡¨ç¤ºã—ã¾ã—ã‚‡ã†ã€‚
            </p>
            
            <!-- å¼•ç”¨ç¬¦ï¼ˆå³ï¼‰ -->
            <span class="absolute -right-4 -bottom-10 text-8xl text-gray-200 opacity-50 select-none">â€</span>
        </blockquote>
        
        <!-- ã‚¿ã‚°è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div id="tags-container" class="flex justify-center flex-wrap gap-2 mt-4 fade-in min-h-[28px]">
            <!-- ã‚¿ã‚°ãƒãƒƒã‚¸ãŒJavaScriptã§æŒ¿å…¥ã•ã‚Œã‚‹ -->
        </div>

        <p id="quote-author" class="text-right text-gray-600 font-medium mt-4 pr-4 fade-in">
            â€”
        </p>
    </div>
    
    <!-- æ“ä½œãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
    <div class="flex flex-col sm:flex-row gap-4 mt-8 w-full">
        <!-- åè¨€è¡¨ç¤ºãƒœã‚¿ãƒ³ -->
        <button id="generate-btn" class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-[1.03] shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 relative">
            <span id="button-text">ä»Šæ—¥ã®æ•™è¨“ã‚’è¦‹ã‚‹</span>
        </button>
        <!-- ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ -->
        <button id="share-btn" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-[1.03] shadow-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50" disabled>
            åè¨€ã‚’ã‚·ã‚§ã‚¢
        </button>
    </div>
    
    <!-- è§£èª¬ã‚¨ãƒªã‚¢ (H2ã‚¿ã‚°) -->
    <div class="mt-4 pt-4 border-t border-gray-200">
        <h2 class="text-xl font-semibold text-gray-700 mb-3 text-center">åè¨€ã®æ·±æ˜ã‚Šè§£èª¬</h2>
        
        <!-- è§£èª¬è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div id="explanation-area" class="bg-gray-50 p-4 rounded-xl shadow-inner min-h-[150px] flex flex-col justify-center items-center">
            <p id="explanation-text" class="text-gray-700 text-sm leading-relaxed text-left">
                ã€Œä»Šæ—¥ã®æ•™è¨“ã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€å³é¸ã•ã‚ŒãŸåè¨€ã«å¯¾ã™ã‚‹è§£èª¬æ–‡ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
            </p>
        </div>
    </div>
    
    <!-- Amazonãƒªãƒ³ã‚¯è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div id="recommendation-area" class="mt-8 pt-4 border-t border-gray-200 text-center hidden fade-in">
        <p class="text-sm font-semibold text-gray-600 mb-3">ä»Šæ—¥ã®æ•™è¨“ã‚’ã•ã‚‰ã«æ·±ã‚ã‚‹ï¼š</p>
        <!-- ãƒªãƒ³ã‚¯ã¯JavaScriptã§å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã¾ã™ -->
        <div id="recommendation-links" class="flex flex-wrap justify-center gap-2">
            <!-- è‘—è€…ãƒªãƒ³ã‚¯ã¨ãƒ†ãƒ¼ãƒåˆ¥ãƒªãƒ³ã‚¯ãŒã“ã“ã«å…¥ã‚‹ -->
        </div>
    </div>

</div>

<!-- åºƒå‘Šã‚³ãƒ¼ãƒ‰ã®æŒ¿å…¥å ´æ‰€ 3: è¨˜äº‹ä¸‹/ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é–“åºƒå‘Š -->
<div id="ad-container-bottom" class="main-container ad-unit-container">
    <p class="text-xs font-bold text-gray-400 mb-2">ã€é–¢é€£ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€‘</p>
    
    <!-- AdSenseåºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆã‚³ãƒ¼ãƒ‰: åè¨€æ ¼è¨€ä¸‹éƒ¨ãƒãƒŠãƒ¼ (æ­£å¼ãªID: 3484248774) -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-6721819057047925"
         data-ad-slot="3484248774"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
<!-- /åºƒå‘Šã‚³ãƒ¼ãƒ‰ã®æŒ¿å…¥å ´æ‰€ 3 -->

<!-- æ—¢å­˜ã®é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ (ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é‡å¼·åŒ–) -->
<div class="main-container bg-white p-8 sm:p-12 rounded-2xl shadow-xl mt-4">
    <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2 border-indigo-100">
        ğŸ’¡ ã€Œä»Šæ—¥ã®ä¸€è¨€ã€ãŒäººç”Ÿã‚’å¤‰ãˆã‚‹ç†ç”±
    </h2>
    <p class="text-gray-600 text-sm mb-4 leading-relaxed">
        ã“ã®åè¨€ãƒ»æ ¼è¨€é›†ã¯ã€æ­´å²ä¸Šã®å‰äººã‚„æˆåŠŸè€…ãŸã¡ãŒæ®‹ã—ãŸæ™®éçš„ãªçŸ¥æµã‚’å³é¸ã—ã€ãŠå±Šã‘ã—ã¾ã™ã€‚
        æˆåŠŸã¨ã¯ã€ä¸€ç¬ã®é–ƒãã§ã¯ãªãã€æ¯æ—¥ã®å°ã•ãªè¡Œå‹•ã¨æ­£ã—ã„ãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆã®ç©ã¿é‡ã­ã«ã‚ˆã£ã¦é”æˆã•ã‚Œã¾ã™ã€‚
        ç§ãŸã¡ãŒæä¾›ã™ã‚‹åè¨€ã¯ã€å˜ãªã‚‹è¨€è‘‰ã®ç¾…åˆ—ã§ã¯ãªãã€ãã®èƒŒæ™¯ã«ã‚ã‚‹æ·±ã„**æ•™è¨“**ã¨ã€ãã‚Œã‚’**ã‚ãªãŸã®ç¾ä»£ã®ç”Ÿæ´»ã‚„ä»•äº‹ã«å¿œç”¨ã™ã‚‹æ–¹æ³•**ã‚’å¾¹åº•çš„ã«è§£èª¬ã—ã¦ã„ã¾ã™ã€‚
        ç‰¹ã«ã€**ã€Œãªãœãã®åè¨€ãŒä»Šã‚‚é‡è¦ãªã®ã‹ã€**ã¨ã„ã†è¦–ç‚¹ã§ã€å…·ä½“çš„ãªè¡Œå‹•æŒ‡é‡ã‚’æç¤ºã—ã¦ã„ã¾ã™ã€‚
    </p>
    <p class="text-gray-600 text-sm mb-4 leading-relaxed">
        **ã€åè¨€ãŒã‚‚ãŸã‚‰ã™å…·ä½“çš„ãªåŠ¹æœã€‘**
        <ul class="list-disc list-inside ml-4 text-sm text-gray-700 space-y-1 mt-2">
            <li>**ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã®å†ç‚¹ç«:** å‰äººã®è¨€è‘‰ã«è§¦ã‚Œã‚‹ã“ã¨ã§ã€åœæ»ã—ãŸæ°—æŒã¡ã«ç«ã‚’ã¤ã‘ã€è¡Œå‹•ã¸ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å†å……é›»ã§ãã¾ã™ã€‚</li>
            <li>**æ„æ€æ±ºå®šã®è³ªã®å‘ä¸Š:** å›°é›£ãªçŠ¶æ³ã§ã€å…ˆäººã®çŸ¥æµãŒãƒ–ãƒ¬ãªã„åˆ¤æ–­è»¸ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚</li>
            <li>**è‡ªå·±æˆé•·ã®åŠ é€Ÿ:** ç¿’æ…£åŒ–ã€å¤±æ•—ã¸ã®å‘ãåˆã„æ–¹ãªã©ã€è‡ªå·±æˆé•·ã«ç›´çµã™ã‚‹æ•™è¨“ã‚’ä½“ç³»çš„ã«å­¦ã¹ã¾ã™ã€‚</li>
        </ul>
    </p>
    <p class="text-gray-600 text-sm leading-relaxed italic border-t pt-3 mt-4">
        æ¯æœã€æ–°ã—ã„åè¨€ã«è§¦ã‚Œã‚‹ã“ã¨ã§ã€ã‚ãªãŸã®æ€è€ƒã¯ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã•ã‚Œã€è¡Œå‹•ã¸ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚ã•ã‚ã€ã‚ãªãŸã‚‚ä»Šæ—¥ã®æ•™è¨“ã‚’è¦‹ã¤ã‘ã¦ã€äººç”Ÿã®æ–°ãŸãªä¸€æ­©ã‚’è¸ã¿å‡ºã—ã¾ã—ã‚‡ã†ã€‚
    </p>
</div>
<!-- /æ—¢å­˜ã®é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->

<!-- NEW: é™çš„åè¨€ä¸€è¦§ (ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é‡å¤§å¹…å¼·åŒ–) -->
<div id="static-quotes-list" class="main-container bg-white p-8 sm:p-12 rounded-2xl shadow-xl mt-4">
    <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2 border-indigo-100">
        ğŸ“š åéŒ²åè¨€ãƒ»æ ¼è¨€ã¨æ·±æ˜ã‚Šè§£èª¬ï¼ˆå…¨18é¸ï¼‰
    </h2>
    <!-- ã“ã“ã«JavaScriptã§ç”Ÿæˆã—ãŸé™çš„ãƒªã‚¹ãƒˆã‚’æŒ¿å…¥ã™ã‚‹ -->
    <div id="all-quotes-list-content">
        <!-- JavaScriptã«ã‚ˆã£ã¦ã™ã¹ã¦ã®åè¨€ãŒã“ã“ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ -->
    </div>
</div>
<!-- /NEW: é™çš„åè¨€ä¸€è¦§ -->


<footer>
    <div class="text-sm text-gray-500 space-x-4">
        <a href="privacy.html" class="hover:underline text-indigo-600">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
        <a href="terms.html" class="hover:underline text-indigo-600">åˆ©ç”¨è¦ç´„</a>
        <span class="text-gray-400">|</span>
        <span class="text-gray-500">å½“ã‚µã‚¤ãƒˆã¯Amazon.co.jpã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆã«å‚åŠ ã—ã¦ã„ã¾ã™ã€‚</span>
    </div>
</footer>

<!-- 1. é€šçŸ¥ãƒœãƒƒã‚¯ã‚¹ (ç”»é¢ä¸‹ä¸­å¤®ã«å›ºå®šè¡¨ç¤º) -->
<div id="notification-box" class="fixed bottom-5 left-1/2 transform -translate-x-1/2 p-3 bg-gray-900 text-white text-sm rounded-lg shadow-2xl opacity-0 transition-opacity duration-300 pointer-events-none z-50">
    <span id="notification-message"></span>
</div>

<!-- 2. å…±æœ‰ãƒ¢ãƒ¼ãƒ€ãƒ« (ç”»é¢ä¸­å¤®ã«è¡¨ç¤º) -->
<div id="share-modal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-40 modal-leave-to" style="display: none;">
    <div class="bg-white p-6 rounded-2xl shadow-2xl max-w-sm w-full mx-4 transform transition-all">
        <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">åè¨€ã‚’ã‚·ã‚§ã‚¢ã™ã‚‹</h3>
        
        <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã§å…±æœ‰ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
        <div class="bg-indigo-50 p-3 rounded-lg text-sm text-gray-700 mb-4 border border-indigo-200">
            <p id="modal-quote-preview" class="font-medium italic text-center"></p>
        </div>

        <div class="flex flex-col gap-3">
            <!-- Twitter å…±æœ‰ãƒœã‚¿ãƒ³ (JSåˆ¶å¾¡) -->
            <button id="share-twitter-btn" class="flex items-center justify-center gap-3 bg-blue-400 hover:bg-blue-500 text-white font-bold py-3 rounded-full transition duration-200 transform hover:scale-[1.02] shadow-md">
                <!-- Twitter Icon (Inline SVG) -->
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.901 1.153h3.586l-8.73 10.04h10.89l-14.61 9.92h-3.66l8.89-10.22h-10.89z"/></svg>
                Twitter (X) ã§ã‚·ã‚§ã‚¢
            </button>

            <!-- LINE å…±æœ‰ãƒœã‚¿ãƒ³ (JSåˆ¶å¾¡) -->
            <button id="share-line-btn" class="flex items-center justify-center gap-3 bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-full transition duration-200 transform hover:scale-[1.02] shadow-md">
                <!-- LINE Icon (Inline SVG Placeholder) -->
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M11.96 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4.332 17.618h-8.583c-.341 0-.616-.275-.616-.615v-8.583c0-.341.275-.616.616-.616h8.583c.341 0 .615.275.615.616v8.583c0 .341-.274.615-.615.615z"/></svg>
                LINE ã§å‹ã ã¡ã«é€ã‚‹
            </button>

            <!-- ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ -->
            <button id="copy-text-btn" class="flex items-center justify-center gap-3 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 rounded-full transition duration-200 transform hover:scale-[1.02] shadow-md">
                <!-- Copy Icon (Inline SVG) -->
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                ã€è§£èª¬ä»˜ãã€‘å…¨æ–‡ã‚’ã‚³ãƒ”ãƒ¼
            </button>
        </div>

        <button id="close-modal-btn" class="mt-4 w-full text-sm text-gray-500 hover:text-gray-800 transition duration-200">
            é–‰ã˜ã‚‹
        </button>
    </div>
</div>

<script>
    // ===================================
    // 1. å›ºå®šãƒ‡ãƒ¼ã‚¿ã¨ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
    // ===================================
    
    // ã€é‡è¦ã€‘å›ºå®šã®åè¨€ãƒ‡ãƒ¼ã‚¿é…åˆ—
    const ALL_QUOTES = [
        {
            quote: "æˆåŠŸã¨ã¯ã€å¤±æ•—ã‚’æã‚Œãšã«æŒ‘æˆ¦ã—ç¶šã‘ã‚‹èƒ½åŠ›ã§ã‚ã‚‹ã€‚",
            author: "ã‚¦ã‚£ãƒ³ã‚¹ãƒˆãƒ³ãƒ»ãƒãƒ£ãƒ¼ãƒãƒ«",
            tags: ["æŒ‘æˆ¦", "å¤±æ•—", "ç¶™ç¶š"],
            explanation: "ãƒãƒ£ãƒ¼ãƒãƒ«ã¯ã€æˆåŠŸã®ç§˜è¨£ã¯ä¸€åº¦ã®å‹åˆ©ã§ã¯ãªãã€ä½•åº¦å¤±æ•—ã—ã¦ã‚‚è«¦ã‚ãšã«ç«‹ã¡å‘ã‹ã†ç²¾ç¥åŠ›ã«ã‚ã‚‹ã¨èª¬ãã¾ã—ãŸã€‚ã“ã®æ•™è¨“ã¯ã€ä»Šæ—¥ã®ãƒ“ã‚¸ãƒã‚¹ç’°å¢ƒã«ãŠã‘ã‚‹ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã€æ–°ã—ã„ã‚¹ã‚­ãƒ«ç¿’å¾—ã«ãã®ã¾ã¾å¿œç”¨ã§ãã¾ã™ã€‚å¤±æ•—ã¯çµ‚ã‚ã‚Šã§ã¯ãªãã€æ¬¡ã¸ã®ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦æ‰ãˆã¾ã—ã‚‡ã†ã€‚"
        },
        {
            quote: "è€ƒãˆã‚‹ã®ã¯é›£ã—ã„ã€‚ã ã‹ã‚‰ã“ãã€ã»ã¨ã‚“ã©ã®äººã¯åˆ¤æ–­ã™ã‚‹ã€‚",
            author: "ã‚«ãƒ¼ãƒ«ãƒ»ãƒ¦ãƒ³ã‚°",
            tags: ["æ€è€ƒ", "å“²å­¦", "æ±ºæ–­"],
            explanation: "æ·±ãè€ƒãˆã‚‹ã“ã¨ã¯ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä½¿ã„ã¾ã™ãŒã€äººã¯ã™ãã«çµè«–ï¼ˆåˆ¤æ–­ï¼‰ã«é£›ã³ã¤ããŒã¡ã§ã™ã€‚ãƒ¦ãƒ³ã‚°ã®è¨€è‘‰ã¯ã€å®‰æ˜“ãªåˆ¤æ–­ã‚’ä¸‹ã™å‰ã«ã€ä¸€åº¦ç«‹ã¡æ­¢ã¾ã£ã¦æœ¬è³ªçš„ãªå•é¡Œã¯ä½•ã‹ã‚’æ·±ãæ˜ã‚Šä¸‹ã’ã‚‹ã“ã¨ã®é‡è¦æ€§ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚ç‰¹ã«é‡è¦ãªçµŒå–¶åˆ¤æ–­ã‚„äººç”Ÿã®é¸æŠã«ãŠã„ã¦å½¹ç«‹ã¤æ•™è¨“ã§ã™ã€‚"
        },
        {
            quote: "å®Œç’§ã‚’ç›®æŒ‡ã™ãªã€‚å®Œæˆã•ã›ã‚ã€‚",
            author: "ãƒãƒ¼ã‚¯ãƒ»ã‚¶ãƒƒã‚«ãƒ¼ãƒãƒ¼ã‚°",
            tags: ["å®Ÿè¡Œ", "ã‚¹ãƒ”ãƒ¼ãƒ‰", "ä»•äº‹è¡“"],
            explanation: "Facebookã®å‰µæ¥­è€…ã§ã‚ã‚‹ã‚¶ãƒƒã‚«ãƒ¼ãƒãƒ¼ã‚°ã®è¨€è‘‰ã¯ã€ç‰¹ã«ITã‚„ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã®æ¥­ç•Œã§é‡è¦–ã•ã‚Œã¾ã™ã€‚å®Œç’§ã‚’è¿½æ±‚ã™ã‚‹ã‚ã¾ã‚Šã€å¸‚å ´ã¸ã®æŠ•å…¥ãŒé…ã‚Œã‚‹ã“ã¨ã®æ©Ÿä¼šæå¤±ã‚’è­¦å‘Šã—ã¦ã„ã¾ã™ã€‚ã¾ãšã¯ã€Œå®Œæˆã€ã•ã›ã¦ä¸–ã«å‡ºã—ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å¾—ãªãŒã‚‰ã€Œå®Œç’§ã€ã«è¿‘ã¥ã‘ã‚‹ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«ãªå§¿å‹¢ãŒã€ç¾ä»£ã®æˆåŠŸã«ã¯ä¸å¯æ¬ ã§ã™ã€‚"
        },
        {
            quote: "æœ€ã‚‚é‡è¦ãªã“ã¨ã¯ã€è‡ªåˆ†è‡ªèº«ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã ã€‚",
            author: "ãƒ—ãƒ©ãƒˆãƒ³",
            tags: ["è‡ªå·±åˆ¶å¾¡", "ç¿’æ…£åŒ–", "å“²å­¦"],
            explanation: "å¤ä»£ã‚®ãƒªã‚·ãƒ£ã®å“²å­¦è€…ãƒ—ãƒ©ãƒˆãƒ³ã¯ã€å¤–çš„ãªå¯Œã‚„æ¨©åŠ›ã§ã¯ãªãã€å†…çš„ãªè‡ªå·±ã®æ„Ÿæƒ…ã‚„æ¬²æœ›ã‚’å¾‹ã™ã‚‹ã“ã¨ã“ããŒã€çœŸã®å¹¸ç¦ã¨æˆåŠŸã®åŸºç›¤ã ã¨è€ƒãˆã¾ã—ãŸã€‚ã“ã®æ•™è¨“ã¯ã€è¡å‹•çš„ãªæ¶ˆè²»ã‚„æ„Ÿæƒ…çš„ãªæ„æ€æ±ºå®šã‚’é¿ã‘ã€é•·æœŸçš„ãªç›®æ¨™é”æˆã«å‘ã‘ãŸç¿’æ…£ã‚’ç¯‰ãä¸Šã§ã€æ¥µã‚ã¦é‡è¦ãªæŒ‡é‡ã¨ãªã‚Šã¾ã™ã€‚"
        },
        {
            quote: "å¹¸ç¦ã¨ã¯ã€èƒ½åŠ›ã¨ç¾å®Ÿã®è¦æ±‚ãŒä¸€è‡´ã—ã¦ã„ã‚‹çŠ¶æ…‹ã§ã‚ã‚‹ã€‚",
            author: "ã‚¸ãƒ§ãƒ³ãƒ»Fãƒ»ã‚±ãƒãƒ‡ã‚£",
            tags: ["å¹¸ç¦", "ä»•äº‹è¡“", "ç›®æ¨™"],
            explanation: "ã‚±ãƒãƒ‡ã‚£å¤§çµ±é ˜ãŒèªã‚‹å¹¸ç¦è«–ã¯ã€è‡ªå·±ã®æŒã¤æ‰èƒ½ã‚„èƒ½åŠ›ãŒã€ç¤¾ä¼šã‚„ä»•äº‹ã‹ã‚‰æ±‚ã‚ã‚‰ã‚Œã¦ã„ã‚‹èª²é¡Œã‚’è§£æ±ºã™ã‚‹æ™‚ã«ã€æœ€ã‚‚å¤§ããªæº€è¶³æ„ŸãŒå¾—ã‚‰ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚è‡ªåˆ†ã®å¼·ã¿ã‚’æ´»ã‹ã—ã€ãã‚Œã‚’å¿…è¦ã¨ã—ã¦ã„ã‚‹å ´æ‰€ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã€ã‚­ãƒ£ãƒªã‚¢ã¨äººç”Ÿã®å……è¶³ã«ç¹‹ãŒã‚Šã¾ã™ã€‚"
        },
        {
            quote: "100å›å©ãã¨å£Šã‚Œã‚‹å£ã§ã‚‚ã€çš†ãŒ99å›ã¾ã§å©ã„ã¦ã„ã‚‹ã€‚",
            author: "æœ¬ç”°å®—ä¸€éƒ",
            tags: ["åŠªåŠ›", "ç¶™ç¶š", "ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³"],
            explanation: "ãƒ›ãƒ³ãƒ€ã®å‰µæ¥­è€…ã§ã‚ã‚‹æœ¬ç”°å®—ä¸€éƒã®è¨€è‘‰ã¯ã€æˆåŠŸã¨å¤±æ•—ã®å¢ƒç•Œç·šãŒã€Œã‚ã¨ä¸€æ­©ã€ã®ç²˜ã‚Šå¼·ã•ã«ã‚ã‚‹ã“ã¨ã‚’ç¤ºå”†ã—ã¦ã„ã¾ã™ã€‚å¤šãã®äººãŒæŒ«æŠ˜ã™ã‚‹99å›ç›®ã§ã‚„ã‚ã¦ã—ã¾ã†ã¨ã“ã‚ã‚’ã€100å›ç›®ã«åˆ°é”ã™ã‚‹ã¾ã§ç¶šã‘ã‚‹æ„æ€ãŒã€ç«¶äº‰å„ªä½æ€§ã¨ãªã‚Šã¾ã™ã€‚æœ€å¾Œã®ç²˜ã‚ŠãŒé‡è¦ã§ã™ã€‚"
        },
        {
            quote: "æƒ³åƒåŠ›ã¯çŸ¥è­˜ã‚ˆã‚Šã‚‚é‡è¦ã§ã‚ã‚‹ã€‚",
            author: "ã‚¢ãƒ«ãƒ™ãƒ«ãƒˆãƒ»ã‚¢ã‚¤ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³",
            tags: ["å‰µé€ æ€§", "æ€è€ƒ", "ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³"],
            explanation: "ã‚¢ã‚¤ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³ã¯ã€æ—¢å­˜ã®çŸ¥è­˜ã‚‚å¤§åˆ‡ã ãŒã€æ–°ã—ã„ä½•ã‹ã‚’ç”Ÿã¿å‡ºã™ãŸã‚ã®æƒ³åƒåŠ›ã“ããŒã€äººé¡ã®é€²æ­©ã®æºæ³‰ã§ã‚ã‚‹ã¨è€ƒãˆã¾ã—ãŸã€‚ã“ã®è¨€è‘‰ã¯ã€æ—¢å­˜ã®æ çµ„ã¿ã«ã¨ã‚‰ã‚ã‚Œãšã€è‡ªç”±ãªç™ºæƒ³ã§èª²é¡Œè§£æ±ºã«å–ã‚Šçµ„ã‚€ã“ã¨ã€ã¤ã¾ã‚Šã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·ã“ã™ãŸã‚ã®ãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆã®é‡è¦æ€§ã‚’èª¬ã„ã¦ã„ã¾ã™ã€‚"
        },
        {
            quote: "å¤‰åŒ–ã“ããŒäººç”Ÿã®ä¸å¤‰ã®æ³•å‰‡ã§ã‚ã‚‹ã€‚",
            author: "ã‚½ã‚¯ãƒ©ãƒ†ã‚¹",
            tags: ["å¤‰åŒ–", "é©å¿œ", "å“²å­¦"],
            explanation: "å¤ä»£ã‹ã‚‰ã®æ•™è¨“ã§ã‚ã‚ŠãªãŒã‚‰ã€ç¾ä»£ã®ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼æ™‚ä»£ã«æœ€ã‚‚å½“ã¦ã¯ã¾ã‚‹è¨€è‘‰ã®ä¸€ã¤ã§ã™ã€‚ãƒ“ã‚¸ãƒã‚¹ã‚‚äººç”Ÿã‚‚å¸¸ã«å¤‰åŒ–ã—ã¦ãŠã‚Šã€ã“ã®äº‹å®Ÿã‚’å—ã‘å…¥ã‚Œã€è‡ªã‚‰ã‚‚å¤‰åŒ–ã«é©å¿œã—ã¦ã„ãèƒ½åŠ›ãŒç”Ÿãæ®‹ã‚‹ãŸã‚ã«å¿…é ˆã§ã™ã€‚å¤‰åŒ–ã‚’æã‚Œãšã€ã‚€ã—ã‚æ¥½ã—ã‚€å§¿å‹¢ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚"
        },
        {
            quote: "ã‚ãªãŸãŒå¤‰ãˆã‚‰ã‚Œã‚‹ã®ã¯ã€ã‚ãªãŸã®åŠªåŠ›ã ã‘ã ã€‚",
            author: "ãƒãƒ«ã‚½ãƒ³ãƒ»ãƒãƒ³ãƒ‡ãƒ©",
            tags: ["åŠªåŠ›", "è‡ªå·±è²¬ä»»", "è¡Œå‹•"],
            explanation: "å—ã‚¢ãƒ•ãƒªã‚«ã®å…ƒå¤§çµ±é ˜ãƒãƒ³ãƒ‡ãƒ©ã®è¨€è‘‰ã¯ã€ä»–äººã®è¡Œå‹•ã‚„ç’°å¢ƒã‚’å¤‰ãˆã‚ˆã†ã¨ã™ã‚‹ç„¡é§„ãªåŠªåŠ›ã‚’ã‚„ã‚ã€å”¯ä¸€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«å¯èƒ½ãªã€Œè‡ªåˆ†ã®åŠªåŠ›ã¨è¡Œå‹•ã€ã«é›†ä¸­ã™ã‚‹ã“ã¨ã®é‡è¦æ€§ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚å¤–éƒ¨ç’°å¢ƒã®ã›ã„ã«ã›ãšã€è‡ªå¾‹çš„ã«è¡Œå‹•ã™ã‚‹åŠ›ã‚’é¤Šã„ã¾ã—ã‚‡ã†ã€‚"
        },
        {
            quote: "æœ€ã‚‚å¤§ããªå±é™ºã¯ã€ç›®æ¨™ãŒé«˜ã™ãã‚‹ã“ã¨ã§ã¯ãªãã€ä½ã™ãã‚‹ã“ã¨ã§ã‚ã‚‹ã€‚",
            author: "ãƒŸã‚±ãƒ©ãƒ³ã‚¸ã‚§ãƒ­",
            tags: ["ç›®æ¨™è¨­å®š", "æŒ‘æˆ¦", "ãƒ“ã‚¸ãƒ§ãƒ³"],
            explanation: "ãƒ«ãƒã‚µãƒ³ã‚¹ã®å·¨åŒ ãƒŸã‚±ãƒ©ãƒ³ã‚¸ã‚§ãƒ­ã¯ã€äººã®èƒ½åŠ›ã¯ç›®æ¨™ã®é«˜ã•ã«ã‚ˆã£ã¦å¼•ãå‡ºã•ã‚Œã‚‹ã¨ä¿¡ã˜ã¦ã„ã¾ã—ãŸã€‚é”æˆã§ããªã„ã‹ã‚‚ã—ã‚Œãªã„ã¨æã‚Œã¦ç›®æ¨™ã‚’ä½ãè¨­å®šã™ã‚‹ã‚ˆã‚Šã‚‚ã€å£®å¤§ãªãƒ“ã‚¸ãƒ§ãƒ³ã‚’æŒã¤ã“ã¨ã§ã€æƒ³åƒä»¥ä¸Šã®åŠ›ã‚’ç™ºæ®ã§ãã‚‹ã“ã¨ã‚’ç¤ºå”†ã—ã¦ã„ã¾ã™ã€‚å¸¸ã«ã‚¹ãƒˆãƒ¬ãƒƒãƒç›®æ¨™ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚"
        },
        {
            quote: "ä»–äººã®ç”Ÿãæ–¹ã‚’çœŸä¼¼ã—ã¦ã‚‚ã€æˆåŠŸã¯å¾—ã‚‰ã‚Œãªã„ã€‚",
            author: "ã‚³ã‚³ãƒ»ã‚·ãƒ£ãƒãƒ«",
            tags: ["å€‹æ€§", "è‡ªå·±ç†è§£", "ç‹¬è‡ªæ€§"],
            explanation: "ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ç•Œã®ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ã€ã‚·ãƒ£ãƒãƒ«ã®è¨€è‘‰ã¯ã€è‡ªåˆ†è‡ªèº«ã®å€‹æ€§ã¨ä¾¡å€¤è¦³ã«æ ¹ã–ã—ãŸç”Ÿãæ–¹ã‚’è¿½æ±‚ã™ã‚‹ã“ã¨ã®é‡è¦æ€§ã‚’å¼·èª¿ã—ã¦ã„ã¾ã™ã€‚æµè¡Œã‚„ä»–äººã®æˆåŠŸä½“é¨“ã‚’ç›²ç›®çš„ã«è¿½ã„ã‹ã‘ã‚‹ã®ã§ã¯ãªãã€ç‹¬è‡ªã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç¢ºç«‹ã™ã‚‹ã“ã¨ã“ããŒã€çœŸã®æˆåŠŸã¨å¹¸ç¦ã«ç¹‹ãŒã‚‹é“ã§ã™ã€‚"
        },
        {
            quote: "äººç”Ÿã¯çŸ­ã„ã€‚ä»Šæ—¥ã§ãã‚‹ã“ã¨ã‚’æ˜æ—¥ã¾ã§å»¶ã°ã™ãªã€‚",
            author: "ãƒ‘ãƒ–ãƒ­ãƒ»ãƒ”ã‚«ã‚½",
            tags: ["æ™‚é–“ç®¡ç†", "å®Ÿè¡Œ", "ãƒ—ãƒ­ã‚¢ã‚¯ãƒ†ã‚£ãƒ–"],
            explanation: "å‰å¤§ãªèŠ¸è¡“å®¶ãƒ”ã‚«ã‚½ã®ã“ã®è¨€è‘‰ã¯ã€ç”Ÿç”£æ€§å‘ä¸Šã«ç›´çµã™ã‚‹æ•™è¨“ã§ã™ã€‚å…ˆå»¶ã°ã—ã¯æœ€å¤§ã®æ•µã§ã‚ã‚Šã€ä»Šæ—¥ã¨ã„ã†ä¸€æ—¥ã€ä»Šã¨ã„ã†ç¬é–“ãŒæŒã¤ä¾¡å€¤ã‚’æœ€å¤§é™ã«æ´»ã‹ã™ã‚ˆã†ä¿ƒã—ã¦ã„ã¾ã™ã€‚ã‚¿ã‚¹ã‚¯ã¯å°ã•ãåˆ†è§£ã—ã€ã€Œä»Šã™ãå®Ÿè¡Œã€ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†ã€‚"
        },
        {
            quote: "é€†å¢ƒã“ãã€äººãŒçœŸã«è©¦ã•ã‚Œã‚‹æ©Ÿä¼šã ã€‚",
            author: "ã‚¦ã‚©ãƒ«ãƒˆãƒ»ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼",
            tags: ["é€†å¢ƒ", "æˆé•·", "ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹"],
            explanation: "ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ã®æˆåŠŸã¯æ•°ã€…ã®å¤±æ•—ã¨å›°é›£ã®ä¸Šã«ç¯‰ã‹ã‚Œã¾ã—ãŸã€‚é€†å¢ƒã«ç›´é¢ã—ãŸæ™‚ã“ãã€ãã®äººã®çœŸä¾¡ã€ãã—ã¦ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹ï¼ˆç²¾ç¥çš„å›å¾©åŠ›ï¼‰ãŒå•ã‚ã‚Œã¾ã™ã€‚å›°é›£ã‚’é¿ã‘ã‚‹ã®ã§ã¯ãªãã€ãã‚Œã‚’æˆé•·ã®ãŸã‚ã®æœ€é«˜ã®è©¦ç·´ã¨ã—ã¦å—ã‘å…¥ã‚Œã‚‹ãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆãŒã€å‰æ¥­ã‚’æˆã™éµã§ã™ã€‚"
        },
        {
            quote: "ç¿’æ…£ã“ããŒã€äººç”Ÿã®ã™ã¹ã¦ã‚’æ±ºå®šã™ã‚‹ã€‚",
            author: "ã‚¢ãƒªã‚¹ãƒˆãƒ†ãƒ¬ã‚¹",
            tags: ["ç¿’æ…£åŒ–", "åŸºç¤", "è‡ªå·±æˆé•·"],
            explanation: "å“²å­¦ã®ç¥–ã‚¢ãƒªã‚¹ãƒˆãƒ†ãƒ¬ã‚¹ã¯ã€äººé–“ã®è¡Œå‹•ã‚„æ€§æ ¼ã¯ä¸€æ™‚çš„ãªå‡ºæ¥äº‹ã§ã¯ãªãã€æ—¥ã€…ã®ç¿’æ…£ã«ã‚ˆã£ã¦å½¢ä½œã‚‰ã‚Œã‚‹ã¨è¦‹ã¦ã„ã¾ã—ãŸã€‚æˆåŠŸã¯ã€æ´¾æ‰‹ãªã‚¤ãƒ™ãƒ³ãƒˆã®çµæœã§ã¯ãªãã€è³ªã®é«˜ã„ç¿’æ…£ã®ç©ã¿é‡ã­ã«ã‚ˆã£ã¦æ±ºã¾ã‚Šã¾ã™ã€‚ç›®æ¨™é”æˆã®ãŸã‚ã«ã¯ã€ã¾ãšå°ã•ãªè‰¯ã„ç¿’æ…£ã‹ã‚‰ä½œã‚Šã¾ã—ã‚‡ã†ã€‚"
        },
        {
            quote: "è‡ªåˆ†ã®ã—ã¦ã„ã‚‹ã“ã¨ã«è‡ªä¿¡ã‚’æŒã¦ã€‚ãã‚ŒãŒæˆåŠŸã®ç¬¬ä¸€æ­©ã ã€‚",
            author: "ãƒˆãƒ¼ãƒã‚¹ãƒ»ã‚¨ã‚¸ã‚½ãƒ³",
            tags: ["è‡ªä¿¡", "ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³", "è¡Œå‹•"],
            explanation: "ç™ºæ˜ç‹ã‚¨ã‚¸ã‚½ãƒ³ã¯ã€è‡ªã‚‰ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚„è£½å“ã«å¯¾ã™ã‚‹æºã‚‹ããªã„ç¢ºä¿¡ãŒã€å›°é›£ãªç ”ç©¶é–‹ç™ºã‚’ç¶šã‘ã‚‹åŸå‹•åŠ›ã«ãªã£ãŸã“ã¨ã‚’çŸ¥ã£ã¦ã„ã¾ã™ã€‚è‡ªä¿¡ã¯å˜ãªã‚‹æ„Ÿæƒ…ã§ã¯ãªãã€è¡Œå‹•ã‚’ä¿ƒã—ã€ä»–è€…ã‚’èª¬å¾—ã™ã‚‹åŠ›ã¨ãªã‚Šã¾ã™ã€‚ã¾ãšã¯è‡ªåˆ†ã®é¸æŠã‚’ä¿¡ã˜ã€å ‚ã€…ã¨è¡Œå‹•ã—ã¾ã—ã‚‡ã†ã€‚"
        },
        {
            quote: "æˆåŠŸã®ç§˜è¨£ã¯ã€å¸¸ã«ç›®çš„ã‚’æŒã¡ç¶šã‘ã‚‹ã“ã¨ã ã€‚",
            author: "ã‚¹ãƒ†ã‚£ãƒ¼ãƒ–ãƒ»ã‚¸ãƒ§ãƒ–ã‚º",
            tags: ["ç›®çš„", "ãƒ“ã‚¸ãƒ§ãƒ³", "ç¶™ç¶š"],
            explanation: "ã‚¢ãƒƒãƒ—ãƒ«ã®å…±åŒå‰µæ¥­è€…ã‚¸ãƒ§ãƒ–ã‚ºã¯ã€è£½å“é–‹ç™ºã«ãŠã„ã¦ã‚‚çµŒå–¶ã«ãŠã„ã¦ã‚‚ã€æ˜ç¢ºãªã€Œãªãœï¼Ÿã€ã‚’æŒã¤ã“ã¨ã®é‡è¦æ€§ã‚’èª¬ãã¾ã—ãŸã€‚ç›®çš„ï¼ˆãƒ‘ãƒ¼ãƒ‘ã‚¹ï¼‰ãŒãƒ–ãƒ¬ãªã‘ã‚Œã°ã€ä¸€æ™‚çš„ãªå¤±æ•—ã‚„å¸‚å ´ã®å¤‰åŒ–ã«ã‚‚å‹•ã˜ãšã€çœŸã«ä¾¡å€¤ã®ã‚ã‚‹ã‚‚ã®ã‚’ä½œã‚Šç¶šã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚ãªãŸã®ç›®çš„ã¯ä½•ã§ã™ã‹ï¼Ÿ"
        },
        {
            quote: "ä»–è€…ã‹ã‚‰æœŸå¾…ã•ã‚Œã‚‹ã“ã¨ä»¥ä¸Šã«ã€è‡ªåˆ†ãŒæœŸå¾…ã™ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã›ã€‚",
            author: "ã‚¸ãƒ§ãƒ¼ã‚¸ãƒ»ãƒãƒ¼ãƒŠãƒ¼ãƒ‰ãƒ»ã‚·ãƒ§ãƒ¼",
            tags: ["è‡ªå·±åŸºæº–", "ç‹¬ç«‹", "æŒ‘æˆ¦"],
            explanation: "ä»–äººã®æœŸå¾…ã«å¿œãˆã‚‹ã“ã¨ã¯ç¤¾ä¼šç”Ÿæ´»ã«ãŠã„ã¦é‡è¦ã§ã™ãŒã€ãã‚Œã ã‘ã§ã¯è‡ªå·±ã®æˆé•·ãŒæ­¢ã¾ã‚Šã¾ã™ã€‚ãƒãƒ¼ãƒŠãƒ¼ãƒ‰ãƒ»ã‚·ãƒ§ãƒ¼ã¯ã€è‡ªåˆ†è‡ªèº«ãŒè¨­å®šã—ãŸé«˜ã„åŸºæº–ï¼ˆè‡ªå·±æœŸå¾…ï¼‰ã‚’é”æˆã™ã‚‹ã“ã¨ã“ããŒã€çœŸã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¨æˆæœã«ç¹‹ãŒã‚‹ã¨ç¤ºå”†ã—ã¾ã™ã€‚è‡ªåˆ†ã®å†…ãªã‚‹å£°ã«è€³ã‚’å‚¾ã‘ã¾ã—ã‚‡ã†ã€‚"
        },
        {
            quote: "ã‚ãªãŸãŒä»Šæ—¥è©±ã™è¨€è‘‰ãŒã€æ˜æ—¥ã®ã‚ãªãŸã®äººç”Ÿã‚’ä½œã‚‹ã€‚",
            author: "ã‚ªãƒ—ãƒ©ãƒ»ã‚¦ã‚£ãƒ³ãƒ•ãƒªãƒ¼",
            tags: ["è¨€è‘‰", "ãƒã‚¸ãƒ†ã‚£ãƒ–æ€è€ƒ", "ç¿’æ…£"],
            explanation: "ãƒ¡ãƒ‡ã‚£ã‚¢ç•Œã®å¥³ç‹ã‚ªãƒ—ãƒ©ã¯ã€è¨€è‘‰ã®åŠ›ãŒç¾å®Ÿã‚’å‰µé€ ã™ã‚‹ã¨ä¿¡ã˜ã¦ã„ã¾ã™ã€‚ãƒã‚¬ãƒ†ã‚£ãƒ–ãªè¨€è‘‰ã¯ãƒã‚¬ãƒ†ã‚£ãƒ–ãªç¾å®Ÿã‚’ã€ãƒã‚¸ãƒ†ã‚£ãƒ–ã§å»ºè¨­çš„ãªè¨€è‘‰ã¯æˆåŠŸã¨å¹¸ç¦ã‚’å¼•ãå¯„ã›ã¾ã™ã€‚æ—¥ã€…ã®å£ç™–ã‚„å†…ãªã‚‹ç‹¬ã‚Šè¨€ã«æ„è­˜ã‚’å‘ã‘ã€ä½¿ã†è¨€è‘‰ã‚’å¤‰ãˆã‚‹ã“ã¨ã‹ã‚‰äººç”Ÿã‚’å¤‰ãˆã¦ã„ãã¾ã—ã‚‡ã†ã€‚"
        }
    ];

    let currentQuoteData = null; // ç¾åœ¨è¡¨ç¤ºä¸­ã®åè¨€ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒ
    let fullShareText = ""; // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ç”¨ã«æ•´å½¢ã•ã‚ŒãŸãƒ•ãƒ«ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¿æŒ
    let shortShareText = ""; // SNS/Web Share APIç”¨ã«æ•´å½¢ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚’ä¿æŒ
    
    // ã€æ–°è¦ã€‘ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°é–¢é€£ã®å¤‰æ•°
    let filteredQuotes = ALL_QUOTES; // åˆæœŸå€¤ã¯å…¨åè¨€
    let currentFilterTag = null; // ç¾åœ¨é¸æŠä¸­ã®ã‚¿ã‚°
    
    // DOMè¦ç´ 
    const quoteTextElement = document.getElementById('quote-text');
    const quoteAuthorElement = document.getElementById('quote-author');
    const generateBtn = document.getElementById('generate-btn');
    const shareBtn = document.getElementById('share-btn'); 
    const recommendationArea = document.getElementById('recommendation-area'); 
    const recommendationLinksContainer = document.getElementById('recommendation-links');
    const tagsContainer = document.getElementById('tags-container'); 
    const explanationTextElement = document.getElementById('explanation-text'); 
    const notificationBox = document.getElementById('notification-box'); 
    const notificationMessage = document.getElementById('notification-message'); 
    const filterStatusElement = document.getElementById('current-filter-tag'); // ãƒ•ã‚£ãƒ«ã‚¿çŠ¶æ…‹è¡¨ç¤ºè¦ç´ 
    const allQuotesListContent = document.getElementById('all-quotes-list-content'); // é™çš„ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒŠ

    
    // ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£DOMè¦ç´ 
    const shareModal = document.getElementById('share-modal');
    const closeModalBtn = document.getElementById('close-modal-btn');
    const modalQuotePreview = document.getElementById('modal-quote-preview');
    const shareTwitterBtn = document.getElementById('share-twitter-btn');
    const shareLineBtn = document.getElementById('share-line-btn'); 
    const copyTextBtn = document.getElementById('copy-text-btn');

    // Amazonã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆID
    const AFFILIATE_TAG = 'yamano32010e-22'; 
    
    // ã‚³ãƒ”ãƒ¼æ™‚ã«ä½¿ç”¨ã™ã‚‹å›ºå®šURL
    const FIXED_SHARE_URL = window.location.href; 
    
    // ===================================
    // 2. ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
    // ===================================

    /**
     * ç”»é¢ä¸‹éƒ¨ã«é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
     */
    function showNotification(message) {
        notificationMessage.textContent = message;
        notificationBox.style.opacity = 1;
        
        setTimeout(() => {
            notificationBox.style.opacity = 0;
        }, 3000);
    }

    /**
     * è‘—è€…ã¨ãƒ†ãƒ¼ãƒã«åŸºã¥ãã€Amazonã§æ¤œç´¢ã™ã¹ãã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ±ºå®šã™ã‚‹
     */
    function updateRecommendation(quoteData) {
        const { tags, author } = quoteData;

        // 1. è‘—è€…åã‹ã‚‰ã®ãƒªãƒ³ã‚¯ (æœ€å„ªå…ˆ)
        const authorUrl = `https://www.amazon.co.jp/s?k=${encodeURIComponent(author)}&tag=${AFFILIATE_TAG}`; 
        const authorLinkHtml = `
            <a href="${authorUrl}" target="_blank" rel="noopener noreferrer" class="text-xs sm:text-sm bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-2 px-3 rounded-full transition duration-200 shadow-md transform hover:scale-[1.05] whitespace-nowrap">
                ${author} ã®é–¢é€£æ›¸ç±ã‚’è¦‹ã‚‹
            </a>
        `;
        
        // 2. ã‚¿ã‚°ã«åŸºã¥ã„ãŸãƒ†ãƒ¼ãƒåˆ¥ãƒªãƒ³ã‚¯
        let keyword = "è‡ªå·±å•“ç™ºæ›¸";
        let label = "é–¢é€£æ›¸ç±";

        if (tags.includes("ä»•äº‹è¡“") || tags.includes("ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—")) {
            keyword = "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ— ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ è‡ªå·±å•“ç™º";
            label = "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—è«–";
        } else if (tags.includes("ç¿’æ…£åŒ–") || tags.includes("ç¶™ç¶š")) {
            keyword = "ç¿’æ…£åŒ– ãƒˆãƒ©ãƒƒã‚«ãƒ¼ æˆåŠŸæ³•å‰‡";
            label = "ç¿’æ…£åŒ–ãƒ»æˆåŠŸæ³•å‰‡";
        } else if (tags.includes("å¤±æ•—") || tags.includes("æŒ‘æˆ¦")) {
            keyword = "å¤±æ•—ã‚’æã‚Œãªã„ æŒ‘æˆ¦ ãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆ";
            label = "æŒ‘æˆ¦ã®ãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆ";
        } else if (tags.includes("å¹¸ç¦") || tags.includes("å“²å­¦")) {
            keyword = "ã‚¦ã‚§ãƒ«ãƒ“ãƒ¼ã‚¤ãƒ³ã‚° ãƒã‚¤ãƒ³ãƒ‰ãƒ•ãƒ«ãƒã‚¹ å¹¸ç¦è«–";
            label = "ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ãƒ»å¹¸ç¦è«–";
        }

        const themeUrl = `https://www.amazon.co.jp/s?k=${encodeURIComponent(keyword)}&tag=${AFFILIATE_TAG}`;
        const themeLinkHtml = `
            <a href="${themeUrl}" target="_blank" rel="noopener noreferrer" class="text-xs sm:text-sm bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-3 rounded-full transition duration-200 shadow-md transform hover:scale-[1.05] whitespace-nowrap">
                ãƒ†ãƒ¼ãƒ: ${label} é–¢é€£å•†å“
            </a>
        `;

        recommendationLinksContainer.innerHTML = authorLinkHtml + themeLinkHtml;
        recommendationArea.classList.remove('hidden');
    }

    /**
     * ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹å‡¦ç†
     */
    async function copyToClipboard(text) {
        // execCommandã‚’ä½¿ã£ãŸã‚³ãƒ”ãƒ¼å‡¦ç†
        const tempInput = document.createElement('textarea');
        tempInput.value = text;
        tempInput.style.position = 'absolute';
        tempInput.style.left = '-9999px';
        tempInput.style.opacity = 0; 
        document.body.appendChild(tempInput);
        
        tempInput.focus();
        tempInput.select();
        tempInput.setSelectionRange(0, 99999); 
        
        let copySuccess = false;
        try {
            const successful = document.execCommand('copy');
            if (successful) {
                showNotification('åè¨€ã¨è§£èª¬ã‚’ã‚³ãƒ”ãƒ¼ã—ãŸã‚ˆï¼');
                copySuccess = true;
            } else {
                throw new Error('execCommand failed');
            }
        } catch (err) {
            console.error('Copy failed:', err);
            showNotification('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¡ã‚ƒã£ãŸ...æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ã¿ã¦ã­ã€‚');
        } finally {
            document.body.removeChild(tempInput);
        }
        
        return copySuccess;
    }
    
    /**
     * ã€æ–°è¦æ©Ÿèƒ½ã€‘ã™ã¹ã¦ã®åè¨€ã‚’é™çš„ã«HTMLã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ (ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼å¯¾ç­–)
     */
    function renderStaticQuotesList() {
        let listHtml = '';
        ALL_QUOTES.forEach((q, index) => {
            const tagsHtml = q.tags.map(tag => `<span class="inline-block bg-indigo-100 text-indigo-700 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${tag}</span>`).join('');
            
            listHtml += `
                <div class="static-quote-card">
                    <h3 class="static-quote-text">
                        ${index + 1}. ã€Œ${q.quote}ã€
                    </h3>
                    <p class="static-author-text">
                        â€” ${q.author}
                    </p>
                    <div class="mb-3">
                        ${tagsHtml}
                    </div>
                    <p class="static-explanation-text">
                        <strong class="text-indigo-600">ã€è§£èª¬ã€‘</strong> ${q.explanation}
                    </p>
                </div>
            `;
        });
        allQuotesListContent.innerHTML = listHtml;
    }


    // ===================================
    // 3. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    // ===================================
    
    /**
     * ãƒ©ãƒ³ãƒ€ãƒ ãªåè¨€ã‚’é¸æŠã—ã€UIã‚’æ›´æ–°ã™ã‚‹
     * ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çŠ¶æ…‹ã«å¿œã˜ã¦ã€filteredQuotesã¾ãŸã¯ALL_QUOTESã‹ã‚‰é¸æŠã™ã‚‹
     */
    function displayRandomQuote() {
        // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸãƒªã‚¹ãƒˆã€ã¾ãŸã¯å…¨ã¦ã®ãƒªã‚¹ãƒˆã‹ã‚‰é¸æŠ
        const quotesToDrawFrom = filteredQuotes.length > 0 ? filteredQuotes : ALL_QUOTES;

        if (quotesToDrawFrom.length === 0) {
            // åè¨€ãŒãªã„å ´åˆã®å‡¦ç†
            quoteTextElement.textContent = "ã“ã®ãƒ†ãƒ¼ãƒã®åè¨€ã¯ç¾åœ¨ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ•ã‚£ãƒ«ã‚¿ã‚’è§£é™¤ã—ã¦ã¿ã¦ãã ã•ã„ã€‚";
            quoteAuthorElement.textContent = "â€”";
            tagsContainer.innerHTML = '';
            explanationTextElement.textContent = "ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸãƒªã‚¹ãƒˆã«ä¸€è‡´ã™ã‚‹åè¨€ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚";
            shareBtn.disabled = true;
            recommendationArea.classList.add('hidden');
            return;
        }

        // ãƒ©ãƒ³ãƒ€ãƒ ã«åè¨€ã‚’é¸æŠ
        const randomIndex = Math.floor(Math.random() * quotesToDrawFrom.length);
        const quoteData = quotesToDrawFrom[randomIndex];
        currentQuoteData = quoteData; 

        // --- STEP 1: ãƒ†ã‚­ã‚¹ãƒˆã®å…¥ã‚Œæ›¿ãˆã¨è¡¨ç¤º ---
        quoteTextElement.textContent = quoteData.quote;
        quoteAuthorElement.textContent = `â€” ${quoteData.author}`;
        
        // ã‚¿ã‚°ã®è¡¨ç¤º (ãƒ•ã‚£ãƒ«ã‚¿çŠ¶æ…‹ã‚’åæ˜ )
        displayTags(quoteData.tags);

        // è§£èª¬æ–‡ã‚’è¡¨ç¤º
        explanationTextElement.textContent = quoteData.explanation.trim();

        // ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ãƒªãƒ³ã‚¯ã®æ›´æ–°
        updateRecommendation(quoteData);
        
        // ã‚·ã‚§ã‚¢ãƒ†ã‚­ã‚¹ãƒˆã®æ›´æ–°
        setupShareText(quoteData);

        // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³
        quoteTextElement.style.opacity = 1;
        quoteAuthorElement.style.opacity = 1;
        tagsContainer.style.opacity = 1; 
        recommendationArea.style.opacity = 1;
        explanationTextElement.style.opacity = 1;
        shareBtn.disabled = false;
        
        // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ä¸­ã§ãªã„å ´åˆã®ã¿é€šçŸ¥
        if (!currentFilterTag) {
            showNotification('ä»Šæ—¥ã®æ•™è¨“ã‚’è¡¨ç¤ºã—ã¾ã—ãŸï¼');
        }

        // ----------------------------------------------------
        // ã€ãƒãƒªã‚·ãƒ¼æº–æ‹ ã€‘åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆã®å‹•çš„ãªå†ãƒ­ãƒ¼ãƒ‰å‡¦ç†ã‚’è¿½åŠ 
        // ----------------------------------------------------
        // ã™ã¹ã¦ã® .adsbygoogle è¦ç´ ã‚’å¯¾è±¡ã«åºƒå‘Šã‚’å†ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™
        const ads = document.querySelectorAll('.adsbygoogle');
        ads.forEach(ad => {
            if (typeof window.adsbygoogle !== 'undefined') {
                // åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆã®ä¸­èº«ã‚’ã‚¯ãƒªã‚¢ã—ã€æ–°ã—ã„åºƒå‘Šã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æº–å‚™ã‚’ã™ã‚‹
                ad.innerHTML = '';
                // åºƒå‘Šã‚’å†ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦æ–°ã—ã„åºƒå‘Šã‚’è¡¨ç¤ºï¼ˆå‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ›´æ–°ï¼‰
                (window.adsbygoogle = window.adsbygoogle || []).push({});
            }
        });
        // ----------------------------------------------------
    }
    
    /**
     * åè¨€ã«ä»˜ä¸ã•ã‚ŒãŸã‚¿ã‚°ã‚’ãƒãƒƒã‚¸ã¨ã—ã¦è¡¨ç¤ºã™ã‚‹ï¼ˆã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ ï¼‰
     */
    function displayTags(tags) {
        tagsContainer.innerHTML = ''; 
        if (!tags || tags.length === 0) return;
        tags.forEach(tag => {
            const isCurrentFilter = tag === currentFilterTag;
            const tagElement = document.createElement('span');
            tagElement.textContent = `#${tag}`;
            
            // ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¨­å®š
            let tagClass = 'text-xs font-semibold px-3 py-1 rounded-full shadow-sm whitespace-nowrap fade-in cursor-pointer transition duration-150';
            
            if (isCurrentFilter) {
                // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ä¸­ã®ã‚¿ã‚° (è§£é™¤ã‚¢ã‚¯ã‚·ãƒ§ãƒ³)
                tagClass += ' bg-indigo-600 text-white hover:bg-indigo-700 ring-2 ring-indigo-300';
            } else {
                // é€šå¸¸ã®ã‚¿ã‚° (çµã‚Šè¾¼ã¿ã‚¢ã‚¯ã‚·ãƒ§ãƒ³)
                tagClass += ' bg-indigo-100 text-indigo-700 hover:bg-indigo-200';
            }
            
            tagElement.className = tagClass;
            tagElement.dataset.tag = tag; // ãƒ‡ãƒ¼ã‚¿å±æ€§ã«ã‚¿ã‚°åã‚’ä¿å­˜
            
            // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
            tagElement.addEventListener('click', () => filterQuotesByTag(tag));
            
            tagsContainer.appendChild(tagElement);
        });
    }


    /**
     * æŒ‡å®šã•ã‚ŒãŸã‚¿ã‚°ã§åè¨€ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã€è¡¨ç¤ºã‚’æ›´æ–°ã™ã‚‹
     * @param {string} tag - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã«ä½¿ç”¨ã™ã‚‹ã‚¿ã‚°å
     */
    function filterQuotesByTag(tag) {
        let message = '';

        if (tag === currentFilterTag) {
            // åŒã˜ã‚¿ã‚°ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´åˆã¯ã€ãƒ•ã‚£ãƒ«ã‚¿ã‚’è§£é™¤
            currentFilterTag = null;
            filteredQuotes = ALL_QUOTES;
            filterStatusElement.innerHTML = `ã™ã¹ã¦ã®æ•™è¨“ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«è¡¨ç¤ºä¸­ <span class="text-xs text-gray-400">(ã‚¿ã‚°ã‚’ã‚¯ãƒªãƒƒã‚¯ã§çµã‚Šè¾¼ã¿)</span>`;
            message = 'ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’è§£é™¤ã—ã¾ã—ãŸã€‚';
        } else {
            // æ–°ã—ã„ã‚¿ã‚°ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
            currentFilterTag = tag;
            filteredQuotes = ALL_QUOTES.filter(q => q.tags.includes(tag));
            
            if (filteredQuotes.length > 0) {
                filterStatusElement.innerHTML = `ã€Œ<span class="text-indigo-600 font-bold">#${tag}</span>ã€ã«é–¢é€£ã™ã‚‹<span class="text-indigo-600 font-bold">${filteredQuotes.length}ä»¶</span>ã®æ•™è¨“ã‹ã‚‰è¡¨ç¤ºä¸­`;
                message = `ã€Œ#${tag}ã€ã§æ•™è¨“ã‚’çµã‚Šè¾¼ã¿ã¾ã—ãŸã€‚`;
            } else {
                // ã‚¿ã‚°ã§çµã‚Šè¾¼ã¾ã‚ŒãŸçµæœãŒãªã„å ´åˆ
                currentFilterTag = null;
                filteredQuotes = ALL_QUOTES;
                filterStatusElement.innerHTML = `ã™ã¹ã¦ã®æ•™è¨“ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«è¡¨ç¤ºä¸­ <span class="text-xs text-red-600 font-bold">(ä¸€è‡´ã™ã‚‹åè¨€ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ)</span>`;
                message = `ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚ã€Œ#${tag}ã€ã«ä¸€è‡´ã™ã‚‹åè¨€ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚`;
            }
        }
        
        // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¾Œã®ãƒªã‚¹ãƒˆã‹ã‚‰åè¨€ã‚’å†è¡¨ç¤º (ã“ã®ä¸­ã«åºƒå‘Šå†ãƒ­ãƒ¼ãƒ‰å‡¦ç†ãŒå«ã¾ã‚Œã‚‹)
        displayRandomQuote();
        showNotification(message);
    }
    
    /**
     * å…±æœ‰ç”¨ãŠã‚ˆã³ã‚³ãƒ”ãƒ¼ç”¨ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’æ•´å½¢ã—ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«è¨­å®šã™ã‚‹
     */
    function setupShareText(quoteData) {
        const { quote, author, explanation, tags } = quoteData;

        // 1. å‹•çš„ãªãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ç”Ÿæˆ
        const tagStrings = (tags || []).filter(t => t).map(tag => `#${tag}`);
        const fixedTags = ["#åè¨€", "#ä»Šæ—¥ã®æ ¼è¨€", "#è‡ªå·±æˆé•·"];
        const uniqueTagsString = Array.from(new Set([...tagStrings, ...fixedTags])).join(' ');
        
        // ã‚³ãƒ”ãƒ¼ç”¨ãƒ•ãƒ«ãƒ†ã‚­ã‚¹ãƒˆ (è§£èª¬æ–‡ã€ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã€URLã‚’å«ã‚€)
        fullShareText = `
ã€æ—¥æ›¿ã‚ã‚Šï¼šä»Šæ—¥ã®åè¨€ã¨æ·±æ˜ã‚Šè§£èª¬ã€‘

ã€Œ${quote}ã€
â€” ${author}

è§£èª¬:
${explanation}

${uniqueTagsString}

ğŸ‘‡ã‚ãªãŸã®æ—¥ã€…ã®è¡Œå‹•åŠ›ã‚’é«˜ã‚ã‚‹æ•™è¨“ã¯ã“ã¡ã‚‰
${FIXED_SHARE_URL}
        `.trim();

        // Web Share APIã® 'url' ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ãƒªãƒ³ã‚¯ãŒè‡ªå‹•çš„ã«ä»˜ä¸ã•ã‚Œã‚‹ãŸã‚ã€URLã¯å«ã‚ãªã„
        shortShareText = `
ã€æ—¥æ›¿ã‚ã‚Šï¼šä»Šæ—¥ã®åè¨€ã€‘
ã€Œ${quote}ã€
â€” ${author}

${uniqueTagsString}
        `.trim(); 

        // ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¨­å®š (åè¨€ã¨è‘—è€…ã®ã¿)
        modalQuotePreview.textContent = `"${quote}" â€” ${author}`; 
    }
    
    // ===================================
    // 4. ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œã¨å…±æœ‰å‡¦ç†
    // ===================================

    /**
     * ãƒ¡ã‚¤ãƒ³ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®å‡¦ç†: Native Share APIãŒã‚ã‚Œã°ãã‚Œã‚’ä½¿ç”¨ã€‚ãªã‘ã‚Œã°ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ãã€‚
     */
    function handleMainShare() {
        if (!currentQuoteData) {
            showNotification('åè¨€ãŒã¾ã è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚');
            return;
        }

        if (navigator.share) {
            navigator.share({
                title: 'ã€æ—¥æ›¿ã‚ã‚Šï¼šä»Šæ—¥ã®åè¨€ã€‘',
                text: shortShareText,
                url: FIXED_SHARE_URL, 
            })
            .then(() => showNotification('ãƒã‚¤ãƒ†ã‚£ãƒ–å…±æœ‰ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‹ã„ãŸã‚ˆï¼'))
            .catch((error) => {
                // AbortErrorã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ãŸå ´åˆãªã®ã§ç„¡è¦–ã—ã€ãã‚Œä»¥å¤–ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
                if (error.name !== 'AbortError') {
                    openShareModal(); 
                }
            });
        } else {
            openShareModal();
        }
    }

    /**
     * å…±æœ‰ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
     */
    function openShareModal() {
        if (!currentQuoteData) return;
        setupShareText(currentQuoteData);
        
        shareModal.style.display = 'flex';
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹å§‹
        setTimeout(() => {
            shareModal.classList.remove('modal-leave-to');
        }, 10);
    }

    /**
     * å…±æœ‰ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
     */
    function closeShareModal() {
        shareModal.classList.add('modal-leave-to');
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«éè¡¨ç¤º
        setTimeout(() => {
            shareModal.style.display = 'none';
        }, 300);
    }

    /**
     * Twitterã§ã‚·ã‚§ã‚¢ã™ã‚‹
     */
    function shareOnTwitter() {
        if (!currentQuoteData) return;
        const twitterText = encodeURIComponent(shortShareText);
        const twitterUrl = `https://twitter.com/intent/tweet?text=${twitterText}&url=${encodeURIComponent(FIXED_SHARE_URL)}`;
        window.open(twitterUrl, '_blank', 'noopener,noreferrer');
        closeShareModal();
    }

    /**
     * LINEã§ã‚·ã‚§ã‚¢ã™ã‚‹
     */
    function shareOnLine() {
        if (!currentQuoteData) return;
        const lineTextWithUrl = shortShareText + '\n\n' + FIXED_SHARE_URL;
        const lineTextEncoded = encodeURIComponent(lineTextWithUrl);
        // LINEã‚¢ãƒ—ãƒªã‚’é–‹ããŸã‚ã®ãƒªãƒ³ã‚¯
        window.location.href = `https://line.me/R/msg/text/?${lineTextEncoded}`;
        closeShareModal(); 
    }


    // ===================================
    // 5. ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã¨åˆæœŸåŒ–
    // ===================================

    // ã€Œä»Šæ—¥ã®æ•™è¨“ã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³: åè¨€è¡¨ç¤º
    generateBtn.addEventListener('click', displayRandomQuote);

    // ã€Œåè¨€ã‚’ã‚·ã‚§ã‚¢ã€ãƒœã‚¿ãƒ³ 
    shareBtn.addEventListener('click', handleMainShare);

    // ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    closeModalBtn.addEventListener('click', closeShareModal);
    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
    shareModal.addEventListener('click', (e) => {
        if (e.target === shareModal) {
            closeShareModal();
        }
    });
    shareTwitterBtn.addEventListener('click', shareOnTwitter);
    shareLineBtn.addEventListener('click', shareOnLine);
    copyTextBtn.addEventListener('click', async () => {
        const success = await copyToClipboard(fullShareText); 
        if (success) {
            closeShareModal();
        }
    });

    // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®åˆæœŸè¨­å®š
    document.addEventListener('DOMContentLoaded', () => {
        // åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã«ã¯ã€ã¾ãšç”Ÿæˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‚‚ã‚‰ã†ã‚ˆã†ã«ä¿ƒã™
        shareBtn.disabled = true;
        
        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«ã™ã¹ã¦ã®åè¨€ãƒªã‚¹ãƒˆã‚’é™çš„ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ï¼ˆæœ€é‡è¦ï¼‰
        renderStaticQuotesList(); 
    });
</script>

</body>
</html>

